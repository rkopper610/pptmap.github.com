---
title: "Process to map PPT study areas"
author: "Ryan and Morgan"
date: "8/30/2019"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(raster)
library(dplyr)
library(sf)
library(tidyr)

#Regions (Run once in order to download)
#ETH <- getData(name = "GADM", country = "ETH", level = 2)
#KEN2 <- getData(name = "GADM", country = "KEN", level = 2)
# UGA <- getData(name = "GADM", country = "UGA", level = 1)
#TZA <- getData(name = "GADM", country = "TZA", level = 2)

ETH <- readRDS("/Users/ryankopper/Desktop/R work/PPTmap/gadm36_ETH_2_sp.rds") #ETHIOPIA
KEN <- readRDS("/Users/ryankopper/Desktop/R work/PPTmap/gadm36_KEN_1_sp.rds")
UGA <- readRDS("/Users/ryankopper/Desktop/R work/PPTmap/gadm36_UGA_1_sp.rds")
TZA <- readRDS("/Users/ryankopper/Desktop/R work/PPTmap/gadm36_TZA_2_sp.rds")

E_Af<- bind(ETH, KEN, UGA, TZA)
#E_Af <- aggregate(E_Af) #if needed to blend for analysis


#Kenya Study sites
KEN_study_sites<-subset(KEN,NAME_1=="Busia" | NAME_1=="Homa Bay" | NAME_1=="Siaya"| NAME_1=="Trans Nzoia" | NAME_1=="Bungoma" | NAME_1=="Vihiga" | NAME_1=="Kisii"| NAME_1=="Migori")

#KEN-Need to add more...
#Kuria,  B-Mumias, Bondo, Nuani, Oyiengo
#Kibos, Alupe, Rachuonyo,  Migori, Kisumu, Nyando,  Rongo, Butere 

#PLUS-------
#Found in Another level and need to find out how to add
#Suba BUT Mbita is there too
study_sites<-subset(KEN2,NAME_2=="Suba" | NAME_2=="Teso North" )
#------------------------------------------------------------------------------

# Find for Uganda: Bukedea 
UGA_study_sites<-subset(UGA,NAME_1 =="Tororo" | NAME_1 =="Bugiri"| NAME_1 =="Iganga")
#revisit to confirm Busia studies in UGA

# Tanzania Tarime 
TZA_study_sites <- subset(TZA, NAME_2 == "Tarime" )



#-----------------------------------

#Ethiopia Study sites---> Melkassa, Mieso
#Hawassa  (Hawassa Zuria, Tula, Wondo Genet
#Dore Bafano and Jara Gelelcha (four kebeles: Dore Bafano, Jara Gelelcha, Wudo Wotatie, and Lebu Koremo)

#Plot Map of 4 countries
plot(E_Af, col = "grey") 

#Add points
points(coordinates(KEN_study_sites),pch = 20, col = "red") 
points(coordinates(UGA_study_sites),pch = 20, col = "red")
points(coordinates(TZA_study_sites),pch = 20, col = "red")
#ADD IN ETHIOPIA

```

Using GADMtools package

```{r}
library(GADMTools)
?GADMTools

map <- gadm_sp_loadCountries(c("ETH","KEN","TZA", "UGA"), level = 2, basefile = "./") 

gadm_plot(map)
#add in points
points(coordinates(map),pch = 20)

#--------------------------------------------------------------------------------
#Centroids
library(rgeos)

trueCentroids <-  gCentroid(KEN,byid=TRUE)
plot(KEN)
points(coordinates(KEN),pch = 20)
points(trueCentroids, pch = 20, col = "red")


plot(ETH)
points(coordinates(ETH),pch = 20)


```


```{r}
library(mapview)
mapview(E_Af, color = "yellow") + mapView(KEN_study_sites, color = "red") +
  mapView(UGA_study_sites, color = "red") + mapView(TZA_study_sites, color = "red")

  
```


